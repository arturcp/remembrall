/*!
 * page v0.4.0
 * lucasmazza/page.js
 * 
 * Licensed MIT Â© Lucas Mazza <lucastmazza@gmail.com>
 */
!function e(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define("page",[],i):"object"==typeof exports?exports.page=i():t.page=i()}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var r=i(1),a=n(r);e.exports=a.default},function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();Object.defineProperty(t,"__esModule",{value:!0});var r=t.Page=function(){function e(){i(this,e),this.initializers={":before":[],":after":[]},this.doc=window&&window.document}return n(e,null,[{key:"variantsDelimiter",value:function e(){return"+"}}]),n(e,[{key:"at",value:function e(t,i){var n=void 0,r=void 0,a=void 0;n=t.split(" ");for(var o=0,u=n.length;u>o;o++)r=this._buildScope(n[o]),a={variants:r.variants,fn:i},this.initializers[r.name]=this.initializers[r.name]||[],this.initializers[r.name].push(a)}},{key:"dispatch",value:function e(){var t=this.recognize();if(void 0!==t){var i=this._buildScope(t),n=this._buildChain(i);this._executeChain(n,i)}}},{key:"recognize",value:function e(){var t=this.doc.getElementsByTagName("body")[0];return t&&t.getAttribute("data-page")}},{key:"_buildScope",value:function t(i){var n={},r=i.split(e.variantsDelimiter());return n.name=r.shift(),n.variants=r.sort(),n}},{key:"_buildChain",value:function e(t){var i=this.initializers[":before"],n=this.initializers[t.name]||[],r=this.initializers[":after"];return i.concat(n).concat(r)}},{key:"_executeChain",value:function e(t,i){for(var n=void 0,r=void 0,a=0,o=t.length;o>a;a++)if(r=t[a],(!(r.variants.length>0)||this._arrayMatches(i.variants,r.variants))&&(n=r.fn(i.name,i.variants),n===!1))return}},{key:"_arrayMatches",value:function e(t,i){if(t.length!==i.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==i[n])return!1;return!0}}]),e}();t.default=new r}])});